<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="facebook-domain-verification" content="izww706vitlsjbxq2ue1hxfgugjy92" />
    <title>GSUGAR ENTERTAINMENT</title>
    <link rel="stylesheet" href="style.css">
    <link rel="script" href="script.js">
    <link rel="icon" href="favicon.ico">
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCbg4hzNgHuHLPPf-p81tOR9NokHUkJEYU",
            authDomain: "wav-page.firebaseapp.com",
            projectId: "wav-page",
            storageBucket: "wav-page.appspot.com",
            messagingSenderId: "177402832992",
            appId: "1:177402832992:web:f9e73201becffd901cfb05",
            measurementId: "G-7LRKNDFK7B"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);

        // Initialize Cloud Firestore and get a reference to the service
        const DB = firebase.firestore();

        // Firestoreì—ì„œ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        async function openMediaContent() {
            const doc = await DB.collection('mediaLinks').doc('showEvent').get()
            if (doc.exists) {
                // Firestoreì—ì„œ ê°€ì ¸ì™€ì„œ HTMLë§Œë“¤ê¸°
                var event_list = doc.data()['event_list']
                var event_end = doc.data()['event_end']
                var event_contents = ""
                var event_end_contents = ""
                // ëª¨ë“  ë¹„ë™ê¸° ì‘ì—…ì„ ì²˜ë¦¬í•  Promise ë°°ì—´ ìƒì„±
                
                for (const eventID of event_list.reverse()) {
                    const data = await DB.collection('event').doc(eventID).get()
                    if (data.exists) {
                        event_contents += `
                            <div id="event_tag" class="event_control" style="background-color: #f6f6f6;">
                                
                                <a href="/event/${eventID}" class="event_image">
                                    <img src="${data.data()['img_link']}" alt="" width="100%">
                                </a>
                                <a href="/event/${eventID}" class="event_button">
                                    <h1 class="event_title">${data.data()['title']}</h1>
                                    <p>ì£¼ìµœ : ${data.data()['host']}</p>
                                </a>
                            </div>`;
                    } else {console.log("No such document!")};
                }

                for (const eventID of event_end.reverse()) {
                    const data = await DB.collection('event').doc(eventID).get()
                    if (data.exists) {
                        event_end_contents += `
                            <div id="event_tag" class="event_control" style="background-color: #f6f6f6;">
                                
                                <a href="/event/${eventID}" class="event_image">
                                    <img src="${data.data()['img_link']}" alt="" width="100%">
                                </a>
                                <a href="/event/${eventID}" class="event_button">
                                    <h1 class="event_title">${data.data()['title']}</h1>
                                    <p>ì£¼ìµœ : ${data.data()['host']}</p>
                                </a>
                            </div>`;
                    } else {console.log("No such document!")};
                }

                document.getElementById('event_tag_now').innerHTML = event_contents;
                document.getElementById('event_tag_end').innerHTML = event_end_contents;
                document.getElementById('event_list_now').innerHTML = `
                    <div style="margin: 8px; text-align: center; display: flex; ">
                        <h2 class="event_select" id="now" style=" color: white; background-color: blueviolet;" onclick="NowEvent()">ì§„í–‰ì¤‘ ( ${event_list.length} )</h2>
                        <h2 class="event_select" id="end" onclick="EndEvent()">ì¢…ë£Œ ( ${event_end.length} )</h2>
                    </div>`
            } else {console.log("No such document!")};
        }

        window.onload = openMediaContent();

        function NowEvent() {
            document.getElementById('event_tag_now').style.display = ""
            document.getElementById('event_tag_end').style.display = "none"
            document.getElementById('now').style.cssText = "color: white; background-color: blueviolet;"
            document.getElementById('end').style.cssText = ""
        }

        function EndEvent() {
            document.getElementById('event_tag_now').style.display = "none"
            document.getElementById('event_tag_end').style.display = ""
            document.getElementById('end').style.cssText = "color: white; background-color: blueviolet;"
            document.getElementById('now').style.cssText = ""
        }
    </script>
</head>
<body>
    <div id="var">
        <h1 class="logo-text white">EVENT</h1>
    </div>
    <div style="position: fixed; background-color: black; color: white; bottom: 0; width: 100%; margin: -8px; text-align: center; display: flex; height: 70px;">
        <a href="../" class="whiteNpadding">ë©”ì¸<br>Main</a>
        <a href="store" class="whiteNpadding">ìŠ¤í† ì–´<br>Store</a>
        <a href="event" class="whiteNpadding" style="background-color: blueviolet;">ì´ë²¤íŠ¸<br>Event</a>
        <a href="mypage" class="whiteNpadding">ë§ˆì´í˜ì´ì§€<br>MyPage</a>
    </div>
    <div id="store">
        <!-- <h2 class="logo-text black">ì•„ì§ ì¤€ë¹„ ì¤‘ì´ì—ìš”!ğŸ¥º</h2> -->
        <div id="event_list_now">
            <div style="margin: 8px; text-align: center; display: flex; ">
                <h2 class="event_select" id="now" style=" color: white; background-color: blueviolet;">ì§„í–‰ì¤‘ ( 519,961 )</h2>
                <h2 class="event_select" id="end" onclick="openEndEvent()">ì¢…ë£Œ ( 22,561,009 )</h2>
            </div>
        </div>
        <div id="event_tag_now">
            <div class="event_control" style="background-color: #f6f6f6;">
                <img class="event_image" src="https://mblogthumb-phinf.pstatic.net/MjAyNDA5MTRfMTg4/MDAxNzI2MjM5OTAwOTI2.85rhl9Vt7vHbHQ2Sn-rYtkPJ6IkTc92mTepjPulFH0sg.DDdLL8JsAxAHJbg2WkRoPgcc6_RcUCV_-LshrHGXCTwg.PNG/%25EC%25B6%2594%25EC%2584%259D.png?type=w966" alt="">
                <a href="/event/chsck" style="margin-left: 8px;">
                    <h1 class="event_title">ì¶”ì„ ê¸°ë… ë¬¸í™”ìƒí’ˆê¶Œ ì´ë²¤íŠ¸</h1>
                    <p>ì£¼ìµœ : GSUGAR Ent.</p>
                </a>
            </div>
        </div>
        <div id="event_tag_end" style="display: none;">
            <div class="event_control" style="background-color: #f6f6f6;">
                <img class="event_image" src="https://mblogthumb-phinf.pstatic.net/MjAyNDA5MTRfMTg4/MDAxNzI2MjM5OTAwOTI2.85rhl9Vt7vHbHQ2Sn-rYtkPJ6IkTc92mTepjPulFH0sg.DDdLL8JsAxAHJbg2WkRoPgcc6_RcUCV_-LshrHGXCTwg.PNG/%25EC%25B6%2594%25EC%2584%259D.png?type=w966" alt="">
                <a href="/event/chsck" style="margin-left: 8px;">
                    <h1 class="event_title">ì¶”ì„ ê¸°ë… ë¬¸í™”ìƒí’ˆê¶Œ ì´ë²¤íŠ¸</h1>
                    <p>ì£¼ìµœ : GSUGAR Ent.</p>
                </a>
            </div>
        </div>


        <!-- <div style="display: flex; align-items: center; margin: 8px;">
            <img src="https://mblogthumb-phinf.pstatic.net/MjAyNDA5MTNfMTEx/MDAxNzI2MTY1NTM0MjM1.kIr6Myoo32qOVdT43Y7bKprehjfjp-QpwqeO2zbAR7sg.caRAIejdSizl2XYnjk4tF1reluMni4qt8AZAIvdo25sg.PNG/eventtest.png?type=w800" alt="" style="width: 50%;">
            <div style="margin-left: 8px;">
                <h1></h1>
                <p></p>
            </div>
        </div> -->
    </div>
        <!-- Career Section -->
    <div id="capyright" style="margin-bottom: 60px;">
        <p class="white">Â© GSUGAR ENTERTAINMENT</p>
    </div>
</body>
</html>